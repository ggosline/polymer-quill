<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="polymer-quill-app">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2>Hello [[prop1]]</h2>

    <form is="iron-form" id="form" method="post" action="/">

      <paper-input name="testinput"></paper-input>

      <paper-button raised click="document.getElementById('form').submit();">
        Post
      </paper-button>

    </form>
    <vaadin-split-layout vertical>
      <div  style="border: inset">
        <ag-grid style="min-height: 400px; display: block; " id="myGrid" class="ag-fresh"></ag-grid>
      </div>

    <div id="editor" style="min-height: 400px; display: block; border-style: ridge; ">
      <quill-element id="ed" theme="bubble"></quill-element>
    </div>
    </vaadin-split-layout>

  </template>

</dom-module>

<script src="ag-grid-test.js"></script>

<script>
    Polymer({

      is: 'polymer-quill-app',

      properties: {
        prop1: {
          type: String,
          value: 'FlParser',
        },
      },

    ready: function () {
        agGrid.initialiseAgGridWithWebComponents();
        var gridOptions = {
            columnDefs: columnDefs,
            rowData: rowData,
            enableSorting: true,
            enableColResize: true,
            enableFilter: true,
            rowSelection: 'single',
            onRowSelected: this._rowSelectedFunc,

        };

        var myGrid = this.$$('#myGrid');
        myGrid.setGridOptions(gridOptions)

        var myEd = this.$$('#ed');
        myEd.addEventListener('text-changed', this._text_changed);
        myEd.format('size', 12)
        myEd.insertText(0, 'lateral nerves in 8â€“10 pairs', {'size': 'medium', 'italic': false});
        },

      _rowSelectedFunc: function (event) {
        // window.alert("row " + event.node.data.start + " selected = " + event.node.selected);
        let strt = event.node.data.start;
        let slen = event.node.data.end - event.node.data.start;
        var myEd = document.querySelector('quill-element');
        if (event.node.selected) {
          myEd.formatText(0, myEd.getLength(), 'background', false);
          myEd.formatText(strt, slen, 'background', 'rgb(102, 185, 102)');
        }
      },

      _text_changed: function (qDelta) {
        console.log(this.$$('#ed').getText());
        }

    });
  </script>




